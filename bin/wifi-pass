#!/bin/bash

if [[ $(uname) != Darwin ]]; then
  echo 'Can only run on MacOS'
  exit 1
fi

wifi_name="$(
  /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I \
    | perl -ne 'print $1 if /\bSSID: (.*)$/'
)"

security find-generic-password -wa "$wifi_name"
